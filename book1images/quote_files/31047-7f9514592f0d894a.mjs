"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[31047],{84928:e=>{var l,t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FollowButton_pin",selections:[{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:l=[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:l,storageKey:null}],type:"Pin",abstractKey:null};t.hash="cabaa35ed7d59dee006897bf3ef32e3d",e.exports=t},594736:(e,l,t)=>{function o(e,l,t){if(e.length!==l.length)return!1;for(let o=0;o<e.length;o+=1)if(!a(e[o],l[o],t+1))return!1;return!0}function n(e,l,t){if(Object.keys(e).length!==Object.keys(l).length)return!1;for(let o in e)if(!(o in l)||!a(e[o],l[o],t+1))return!1;return!0}function a(e,l,t){if(t>=1e3)return!1;if(e===l)return!0;if(null==e||null==l||"object"!=typeof e&&"object"!=typeof l)return e!=e&&l!=l;let a=Object.prototype.toString.call(e),r=Object.prototype.toString.call(l);if(a!==r)return!1;switch(a){case"[object Array]":return o(e,l,t);case"[object Set]":return o(Array.from(e).sort(),Array.from(l).sort(),t);case"[object Object]":case"[object Arguments]":return n(e,l,t);case"[object Map]":return n(Object.fromEntries(e),Object.fromEntries(l),t);case"[object RegExp]":return e+""==l+"";case"[object Error]":return e.name===l.name&&e.message===l.message;default:return!1}}function r(e,l){return a(e,l,0)}t.d(l,{ZP:()=>r,qP:()=>o})},780679:(e,l,t)=>{t.d(l,{g:()=>r,t:()=>a});var o=t(667294);let n=(0,o.createContext)(null),a=n.Provider,r=()=>(0,o.useContext)(n)},505920:(e,l,t)=>{t.d(l,{UZ:()=>c,Z8:()=>_,my:()=>f});var o=t(667294);t(702664);var n=t(214494),a=t(425288),r=t(785893);function i(e,l,t){var o;let n=[...null!==(o=l[e][t.payload.name])&&void 0!==o?o:[],t.payload.handler],a={...l};return a[e]={...l[e],[t.payload.name]:n},a}function s(e,l,t){if(!l[e][t.payload.name])return l;let o=l[e][t.payload.name].filter(e=>e!==t.payload.handler),n={...l};return n[e]={...l[e],[t.payload.name]:o},n}let{Provider:d,useHook:u}=(0,a.Z)("ResourceContext");function c({children:e}){let[{listeners:l,moreListeners:t},a]=(0,o.useReducer)((e,l)=>{switch(l.type){case"addListener":return i("listeners",e,l);case"addMoreListener":return i("moreListeners",e,l);case"removeListener":return s("listeners",e,l);case"removeMoreListener":return s("moreListeners",e,l);default:return e}},{listeners:{},moreListeners:{}});n.Z.fetchCompleteCallback=({resource:e,options:t,response:o,normalizedResponse:n,refresh:a,resourceSchema:r})=>{l[e]&&l[e].forEach(l=>l({isRefresh:a,normalizedResponse:n,options:t,schema:r,resource:e,response:o}))},n.Z.fetchMoreCompleteCallback=({resource:e,options:l,response:o,normalizedResponse:n,refresh:a,resourceSchema:r})=>{t[e]&&t[e].forEach(t=>t({isRefresh:a,normalizedResponse:n,options:l,schema:r,resource:e,response:o}))};let u=(0,o.useMemo)(()=>({listenerDispatch:a}),[]);return(0,r.jsx)(d,{value:u,children:e})}function _(e,l){let{listenerDispatch:t}=u();(0,o.useEffect)(()=>(t({type:"addListener",payload:{name:e,handler:l}}),()=>{t({type:"removeListener",payload:{name:e,handler:l}})}))}function f(e,l){let{listenerDispatch:t}=u();(0,o.useEffect)(()=>(t({type:"addMoreListener",payload:{name:e,handler:l}}),()=>{t({type:"removeMoreListener",payload:{name:e,handler:l}})}))}},458882:(e,l,t)=>{t.d(l,{l:()=>a,r:()=>r});var o=t(667294);let n=(0,o.createContext)(null),a=()=>(0,o.useContext)(n),r=n.Provider},667679:(e,l,t)=>{t.d(l,{Z:()=>a});var o=t(780679),n=t(458882);let a=()=>{let e=(0,o.g)(),l=(0,n.l)();return t=>{let{mobileOptions:o,desktopOptions:n,reason:a,attributionLabel:r,pinId:i}=t;e?e.showDesktopSignupModal({signupFlow:(null==n?void 0:n.modalType)==="login"?{type:"login"}:{type:"signup"},reason:a,attributionLabel:r,...null==n?void 0:n.modalOptions}):l&&l.showMobileSignupModal({reason:a,attributionLabel:r,headingType:null==o?void 0:o.headingType,pinId:i})}}},815613:(e,l,t)=>{t.d(l,{Z:()=>j}),t(167912);var o,n=t(883119),a=t(112690),r=t(916117),i=t(898781),s=t(773285),d=t(667679),u=t(867820),c=t(52022),_=t(343341),f=t(50286),m=t(829407),p=t(19121),h=t(945698),g=t(927383),w=t(698330),b=t(201155),y=t(640064),x=t(785893);let v=({children:e,pulsar:l,testId:t})=>l.show?(0,x.jsx)(n.xu,{"data-test-id":t,position:"relative",children:(0,x.jsxs)(n.iP,{onTap:l.onClick,tapStyle:"none",children:[(0,x.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"-75px"}},marginTop:-5,position:"absolute",children:e}),(0,x.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"-83px"}},marginTop:-12,position:"absolute",children:(0,x.jsx)(n.o3,{})})]})}):(0,x.jsx)(n.xu,{"data-test-id":t,children:e}),P=void 0!==o?o:o=t(84928);function j({auxData:e,disabled:l,disableLog:t,followEventType:o,id:j,inline:k,invertColors:A,isFollowed:L,isIdeaPin:z,isLegoEnabled:C,isSecondaryButton:S,isUserFollowButton:U,isUserMe:Z,onFollow:F,onUnfollow:T,pinKey:E,shouldUseLegoColors:I,showPulsar:O,size:D,textType:R="FollowFollowing",unfollowEventType:H,viewParameter:M,viewType:N,clientTrackingParams:B}){let W;let K=(0,i.ZP)(),G=(0,f.HG)(),{showToast:$}=(0,_.F9)(),V=(0,c.Z)(),X=(0,a.Z)(),Y=(0,d.Z)(),{checkExperiment:q}=(0,s.F)(),Q=(0,g.Z)(),J=(0,p.Z)(),ee=J&&J.isAuth,{unauthFollowUserId:el,setUnauthFollowUserId:et}=(0,y.f)(),eo=(0,w.mN)()(j),en=eo&&{imageMediumUrl:eo.image_medium_url,username:eo.username},ea=(0,r.Z)(P,E),er=null==ea?void 0:ea.linkDomain,ei=null==ea?void 0:ea.nativeCreator,es=null==ea?void 0:ea.originPinner,ed=null==ea?void 0:ea.pinner;W=ei||(er?er.officialUser:es||ed);let eu=null!=en?en:W;(0,m.Z)(()=>{!G&&ee&&el&&j&&el===j&&F(j)});let ec=Q({fn:()=>{ee?L?(T(j),t||X({event_type:H,view_type:N,view_parameter:M,object_id_str:j,aux_data:e,clientTrackingParams:B})):(F(j),U&&$(({hideToast:e})=>{if(!eu)return null;let l=eu.username?`/${eu.username}/`:"";return(0,x.jsx)(b.Z,{handleHide:e,href:l,imageUrl:eu.imageMediumUrl,text:K._('Following! Their created Pins will show up in your home feed!', 'followButton.follow.informationalToastText', 'Text explaining that a creator\'s Pins will show up in home feed after follow'),userId:j})}),t||X({event_type:o,view_type:N,view_parameter:M,object_id_str:j,aux_data:e,clientTrackingParams:B})):((0,u.My)(`mweb_unauth_follow_button.tap.${String(N)}`),5===N&&26===o&&(0,u.My)("mweb_unauth_board_page_follow_button.tap"),(0,u.NC)(L?"press_profile_unfollow":"press_profile_follow"),V({action:"click",item:"board-follow-button"}),Y({reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",attributionLabel:z?"click_idea_pin_follow":"click_follow",desktopOptions:{modalType:"signup",modalOptions:G&&q("pcons_dweb_contextual_follow_modal").anyEnabled?{source:"followButton",container:"follow"}:void 0},mobileOptions:!G&&q("pcons_mweb_contextual_follow_modal").anyEnabled?{headingType:"follow"}:void 0}),G||et(null!=j?j:""),(0,u.NC)("clickthrough"))},modalHeader:(0,h.N4)({i18n:K,toFollow:!L})}),e_=!L&&!!O,ef=()=>{if(Z)return K._('That\'s you!', 'Follow button is disabled because this is you', 'Follow button is disabled because this is you');if("AddRemove"===R)return L?K._('Remove', 'unfollowButton.removeText', 'Follow button label - followed state, so user can click to "remove" the follow'):K._('Add', 'followButton.addText', 'Follow button label - unfollowed state, so user can click to "add" the follow');let e="FollowUnfollow"===R?K._('Unfollow', 'unfollowButton.unfollowText', 'Follow button label - followed state, so user can click to "unfollow" the follow'):K._('Following', 'Follow button label - followed state', 'Follow button label - followed state');return L?e:K._('Follow', 'Follow button label - unfollowed state', 'Follow button label - unfollowed state')};return(0,x.jsx)(v,{pulsar:e_?{show:!0,onClick:ec}:{show:!1},testId:Z||L?"board-unfollow-button":"board-follow-button",children:(0,x.jsx)(n.zx,{accessibilityLabel:ef(),color:I||"AddRemove"===R||!C&&S||L?"gray":"red",disabled:Z||l,fullWidth:k,onClick:e_?void 0:({event:l})=>{l.preventDefault(),l.stopPropagation(),t||X({event_type:101,component:13672,element:11951,object_id_str:j,view_type:N,view_parameter:M,aux_data:e,clientTrackingParams:B}),ec()},selected:A?!L:I&&L||!!L&&S,size:D,text:ef()})})}},640064:(e,l,t)=>{t.d(l,{f:()=>i,w:()=>s});var o=t(667294),n=t(425288),a=t(785893);let{Provider:r,useHook:i}=(0,n.Z)("Session");function s({children:e}){let[l,t]=(0,o.useState)(void 0),n=(0,o.useCallback)(()=>t(void 0),[]),i=(0,o.useMemo)(()=>({unauthFollowUserId:l,setUnauthFollowUserId:t,removeUnauthFollowUserId:n}),[l,n]);return(0,a.jsx)(r,{value:i,children:e})}},987318:(e,l,t)=>{t.d(l,{H:()=>a,o:()=>n});var o=t(425288);let{Provider:n,useHook:a}=(0,o.Z)("LimitedLogin")},945698:(e,l,t)=>{t.d(l,{N4:()=>a,Wh:()=>o,hr:()=>n});let o=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),n=e=>e._('You\'re almost there! Log in to access all of Pinterest', 'loginModal.limitedLogin.subheader', 'Subheader text on personalized login modal/flyout to remind users to log in'),a=({i18n:e,toFollow:l})=>l?e._('Log in to follow', 'limitedLogin.modalHeader.follow', 'Title on mobile web limited login modal to prompt users to login to follow a user or board.'):e._('Log in to unfollow', 'limitedLogin.modalHeader.unfollow', 'Title on mobile web limited login modal to prompt users to login to unfollow a user or board.')},927383:(e,l,t)=>{t.d(l,{Z:()=>i});var o=t(898781),n=t(50286),a=t(987318),r=t(945698);let i=()=>{let e=(0,o.ZP)(),l=(0,n.HG)(),{viewer:t,loginForMore:i,limitedLoginModalSubheader:s,limitedLoginModalNextLocation:d}=(0,a.H)(),u="LIMITED_LOGIN"===t.type;return u?({modalHeader:t,nextLocation:o})=>n=>{let a=null;n&&(n.nativeEvent&&n.nativeEvent instanceof Event?a=n:n.event&&(a=n.event)),a&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()),null==i||i.setVisible(!0),null==s||s.setText(t||(l?(0,r.hr)(e):(0,r.Wh)(e))),o&&(null==d||d.setRoute(o))}:({fn:e})=>e}},230903:(e,l,t)=>{t.d(l,{Z:()=>d});var o=t(883119),n=t(121151),a=t(898781),r=t(349700),i=t(50286),s=t(785893);function d({onDismiss:e,firstName:l,handleUnfollowUser:t}){let d=(0,a.ZP)(),u=(0,i.HG)(),c=(0,r.nk)(d._('Unfollow {{ firstName }}?', 'unfollowUser.modal.header', 'header text asking if we should unfollow the user. firstName: name of the user to unfollow'),{firstName:l}).join(""),_=d._('You will no longer be able to view their profile, Pins, boards, followers or following lists. They will not be notified.', 'unFollowUser.modal.description', 'explanation of what removing another user means'),f=d._('Cancel', 'unfollowUser.modal.cancel', 'Cancel unfollowing a user'),m=d._('Unfollow', 'unfollowUser.modal.button.unfollow', 'Button to confirm removing a user');return u?(0,s.jsx)(n.ZP,{accessibilityModalLabel:c,footer:(0,s.jsxs)(o.xu,{alignItems:"center",display:"flex",justifyContent:"end",marginEnd:-1,marginStart:-1,children:[(0,s.jsx)(o.xu,{padding:1,children:(0,s.jsx)(o.zx,{fullWidth:!0,onClick:e,size:"md",text:f})}),(0,s.jsx)(o.xu,{padding:1,children:(0,s.jsx)(o.zx,{color:"red",fullWidth:!0,onClick:t,size:"md",text:m})})]}),heading:c,onDismiss:e,role:"alertdialog",size:"md",children:(0,s.jsx)(o.xu,{"data-test-id":"unfollow-text",padding:4,children:(0,s.jsx)(o.xv,{children:_})})}):(0,s.jsxs)(n.ZP,{accessibilityModalLabel:c,mobileHideCloseIcon:!0,onDismiss:e,type:"unFollow_button",children:[(0,s.jsx)(o.xu,{alignItems:"center",display:"flex",paddingX:3,paddingY:5,children:(0,s.jsx)(o.X6,{accessibilityLevel:1,size:"500",children:c})}),(0,s.jsx)(o.xu,{marginBottom:3,marginEnd:2,marginStart:2,children:(0,s.jsx)(o.xv,{align:"center",children:_})}),(0,s.jsxs)(o.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginEnd:-1,marginStart:-1,children:[(0,s.jsx)(o.xu,{padding:1,children:(0,s.jsx)(o.zx,{fullWidth:!0,onClick:e,size:"md",text:f})}),(0,s.jsx)(o.xu,{padding:1,children:(0,s.jsx)(o.zx,{color:"red",fullWidth:!0,onClick:t,size:"md",text:m})})]})]})}},90326:(e,l,t)=>{t.d(l,{Ge:()=>d,JS:()=>r,OF:()=>y,P_:()=>i,Q_:()=>_,b8:()=>f,eR:()=>b,h2:()=>u,h6:()=>c});var o=t(214494),n=t(186656),a=t(735422);function r(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}let i=(e,l)=>({type:"USER_FOLLOW",payload:{id:e,value:l}}),s=(e,l)=>({type:"USER_BLOCK",payload:{id:e,value:l}}),d=({id:e,orbacSubjectId:l,blockSource:t,blockContext:n,logContextEvent:a})=>async r=>{r(s(e,!0));let i=await o.Z.create("UserBlockResource",{blocked_user_id:e,orbac_subject_id:l,block_source:t,block_context:n}).callCreate().catch(()=>r(s(e,!1)));return a({event_type:54,object_id_str:e}),i},u=(e,l)=>async t=>{t(s(e,!1));let n=await o.Z.create("UserBlockResource",{blocked_user_id:e}).callDelete().catch(()=>t(s(e,!0)));return l({event_type:55,object_id_str:e}),n};function c(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}let _=(e,l)=>()=>{let t=o.Z.create("UserStateResource",{state:e,value:l});return t.callCreate()},f=(e,l,t)=>(o,r)=>{(0,n.Z)({url:"/v3/users/me/",method:"POST"}).then(()=>{t({event_type:48,object_id_str:r().session.userId}),e(),(0,a.Dm)()},l)},m=e=>e>=200&&e<400,p=(e,l="150x150")=>e&&`https://i.pinimg.com/${l}/${e.substring(0,2)}/${e.substring(2,4)}/${e.substring(4,6)}/${e}.jpg`||"",h=async(e,l,t)=>{let n=await o.Z.create("VIPResource",{upload_ids:[e]}).callGet();if(n.resource_response.data[e]){let o=n.resource_response.data[e],{status:a,signature:r}=o;if("processing"===a||"registered"===a)setTimeout(async()=>{h(e,l,t)},5e3);else if("succeeded"===a){let e=p(r);l(e)}else t()}else t()},g=(e,l,t,n,a)=>{let r=new FormData;return r.append("img",e),o.Z.create("VIPResource",{type:l}).callCreate().then(l=>{if(l.resource_response.data){let{upload_id:o,upload_url:r,upload_parameters:i}=l.resource_response.data,s=new XMLHttpRequest;s.open("POST",r,!0),s.onload=()=>{m(s.status)?(t(100),h(o,n,a)):a()},s.upload.onprogress=e=>{let l=Math.round(100*e.loaded/e.total);t(l)};let d=new FormData;for(let e in i)d.append(e,i[e]);d.append("file",e),s.send(d)}},()=>{a()})},w=e=>new Promise((l,t)=>{g(e,"pinimage",()=>{},e=>{l(e)},e=>{t(e)})}),b=e=>new Promise((l,t)=>{"string"==typeof e?e.startsWith("data")&&w(function(e,l=512){let t=e.split(";"),o=t[0].split(":")[1],n=t[1].split(",")[1],a=atob(n),r=[];for(let e=0;e<a.length;e+=l){let t=a.slice(e,e+l),o=Array(t.length);for(let e=0;e<t.length;e+=1)o[e]=t.charCodeAt(e);let n=new Uint8Array(o);r.push(n)}let i=new Blob(r,{type:o});return i}(e)).then(e=>l(e)):t("Invalid Image")}),y=e=>()=>(0,n.Z)({url:"/v3/register/exists/",data:{email:e}})},201155:(e,l,t)=>{t.d(l,{Z:()=>u});var o=t(883119),n=t(499128),a=t(898781),r=t(784590),i=t(50286),s=t(785893);function d({ideaPinImages:e}){let l=e.map((e,l)=>{var t,n,a;return(0,s.jsx)(o.xu,{borderStyle:"sm",color:"default",dangerouslySetInlineStyle:{__style:{borderColor:"white",marginInlineEnd:"-17px",WebkitMaskImage:"-webkit-radial-gradient(white, black)",zIndex:l}},height:48,overflow:"hidden",rounding:2,width:28,children:(0,s.jsx)(o.Ee,{alt:"",color:"#696969",fit:"cover",naturalHeight:null!==(t=null==e?void 0:e.height)&&void 0!==t?t:1,naturalWidth:null!==(n=null==e?void 0:e.width)&&void 0!==n?n:1,src:null!==(a=null==e?void 0:e.url)&&void 0!==a?a:""})},l)});return(0,s.jsx)(o.kC,{justifyContent:"center",children:(0,s.jsx)(o.kC,{justifyContent:"start",width:{1:28,2:40,3:48}[e.length],children:l})})}function u({handleHide:e,text:l,userId:t,href:u,imageUrl:c}){let _=(0,a.ZP)(),f=(0,i.HG)(),m=(0,r.Z)({name:"UserStoryPinsFeedResource",options:{data:{filter_version:2,public_only:!0},field_set_key:"partner_grid_item",user_id:t}}),p=Array.isArray(l)?l.join(" "):l;if(0===(m.data||[]).length)return(0,s.jsx)(n.ZP,{duration:5e3,href:u,onHide:e,text:p,thumbnail:c?{image:(0,s.jsx)(o.Ee,{alt:_._('Image of who you followed', 'userFollowingToast.thumbnail.userImage', 'Profile thumbnail of the user you followed'),fit:"cover",naturalHeight:1,naturalWidth:1,src:c})}:void 0});let h=(m.data||[]).slice(0,3).map(e=>{var l;return null===(l=e.images)||void 0===l?void 0:l[f?"236x":"170x"]}),g=(0,s.jsx)(d,{ideaPinImages:h});return(0,s.jsx)(n.ZP,{_dangerouslySetThumbnail:g,duration:5e3,href:u,onHide:e,text:p})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/31047-7f9514592f0d894a.mjs.map